{"id":366,"date":"2023-08-13T11:14:58","date_gmt":"2023-08-13T01:14:58","guid":{"rendered":"http:\/\/localhost:10138\/?p=366"},"modified":"2023-08-17T10:55:40","modified_gmt":"2023-08-17T00:55:40","slug":"signup-via-location-totara","status":"publish","type":"post","link":"https:\/\/dev-train-well.pantheonsite.io\/signup-via-location-totara\/","title":{"rendered":"Enable signup via locations using a simple drop down (Totara LMS)"},"content":{"rendered":"\n<p>Totara allows users the choice to choose training:<\/p>\n\n\n\n<ol>\n<li>Via the training catalogue by searching for course\/program<\/li>\n\n\n\n<li>Via the training calendar by date (i.e. looking for training in next few weeks)<\/li>\n<\/ol>\n\n\n\n<p>This simple code provides a third option for users to find learning; i.e. choose their location to see if there are any upcoming seminar events to attend at their site\/location (i.e. Room).<\/p>\n\n\n\n<p>This is one of the 3 methods for users to find learning:<\/p>\n\n\n\n<ul>\n<li>Catalogue<\/li>\n\n\n\n<li>Calendar<\/li>\n\n\n\n<li>Workshops at location<\/li>\n<\/ul>\n\n\n<div class=\"wp-block-image\">\n<figure class=\"aligncenter size-full\"><img loading=\"lazy\" decoding=\"async\" width=\"280\" height=\"216\" src=\"https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/Find-workshops-at-your-location.jpg\" alt=\"\" class=\"wp-image-367\"\/><\/figure><\/div>\n\n\n<h2 class=\"wp-block-heading\"><strong>Here is the process in detail:<\/strong><\/h2>\n\n\n\n<p>There are 2 parts to this:<\/p>\n\n\n\n<ol>\n<li>Add a locations drop down to a dashboard with the values of the locations set to equivalent <strong>Room IDs<\/strong>. We will use scripts to redirect users to a report with roomid appended to the URL.<\/li>\n\n\n\n<li>Add code to a <em>Seminar Room Assignments<\/em> report. The roomid passed through the URL is used to filter and only show events happening at a particular location. In this report, include a column for Number of Attendees (linked to attendee page). The script uses this link and modifies it into a simple sign-up button.<\/li>\n<\/ol>\n\n\n\n<p>More comments have been added to the code.<\/p>\n\n\n\n<p>1. Trainers can choose a room (I have renamed <strong>Rooms<\/strong> to <strong>Locations<\/strong> via the Language pack). <br>Learn more how to <a href=\"https:\/\/dev-train-well.pantheonsite.io\/language-strings-totara-lms\/\" data-type=\"post\" data-id=\"138\">Modify the correct language string easily in Totara LMS<\/a>.<br><\/p>\n\n\n<div class=\"wp-block-image\">\n<figure class=\"aligncenter size-full\"><img loading=\"lazy\" decoding=\"async\" width=\"800\" height=\"123\" src=\"https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/select-location.jpg\" alt=\"Select Room or Location\" class=\"wp-image-368\" srcset=\"https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/select-location.jpg 800w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/select-location-600x92.jpg 600w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/select-location-300x46.jpg 300w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/select-location-768x118.jpg 768w\" sizes=\"(max-width: 800px) 100vw, 800px\" \/><\/figure><\/div>\n\n\n<p>2. Each room has a unique ID which we can identify from the Manage Rooms Page <code>\/mod\/facetoface\/room\/manage.php<\/code><\/p>\n\n\n\n<p>Note: each location has been set to one of the site locations (rooms). Actual room name is added to the event description.<\/p>\n\n\n<div class=\"wp-block-image\">\n<figure class=\"aligncenter size-large\"><img loading=\"lazy\" decoding=\"async\" width=\"900\" height=\"213\" src=\"https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/manage-rooms-showing-ids-900x213.jpg\" alt=\"Manage Rooms Page showing room names and IDs\" class=\"wp-image-369\" srcset=\"https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/manage-rooms-showing-ids-900x213.jpg 900w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/manage-rooms-showing-ids-600x142.jpg 600w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/manage-rooms-showing-ids-300x71.jpg 300w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/manage-rooms-showing-ids-768x182.jpg 768w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/manage-rooms-showing-ids.jpg 925w\" sizes=\"(max-width: 900px) 100vw, 900px\" \/><\/figure><\/div>\n\n\n<p>3. We use a simple Search By Location Dashboard <code>\/totara\/dashboard\/index.php?id=41<\/code>. It has a dropdown to choose location.<\/p>\n\n\n<div class=\"wp-block-image\">\n<figure class=\"aligncenter size-full\"><img loading=\"lazy\" decoding=\"async\" width=\"646\" height=\"326\" src=\"https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/choose-location.jpg\" alt=\"Select drop down on a simple dashboard.\" class=\"wp-image-370\" srcset=\"https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/choose-location.jpg 646w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/choose-location-600x303.jpg 600w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/choose-location-300x151.jpg 300w\" sizes=\"(max-width: 646px) 100vw, 646px\" \/><\/figure><\/div>\n\n\n<p><br>4. The SELECT Location (drop down) has its option values set to the Room Numbers. The first option value is set to <code>\u201call\u201d<\/code> (1). Our code will redirect users to a report and append this value to the URL. When Virtual Session is selected, the <code>&amp;roomid=392<\/code> is appended to the report URL (2). When All upcoming sessions is selected, the <code>&amp;roomid=all<\/code> is appended to the report URL. When Melbourne is selected, the <code>&amp;roomid=393<\/code> is appended to the report URL.<\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img loading=\"lazy\" decoding=\"async\" width=\"803\" height=\"247\" src=\"https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/choose-location-dropdown.jpg\" alt=\"\" class=\"wp-image-371\" srcset=\"https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/choose-location-dropdown.jpg 803w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/choose-location-dropdown-600x185.jpg 600w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/choose-location-dropdown-300x92.jpg 300w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/choose-location-dropdown-768x236.jpg 768w\" sizes=\"(max-width: 803px) 100vw, 803px\" \/><\/figure>\n\n\n\n<p><strong>Note:<\/strong>&nbsp;I was unable to add the select box to the Report itself since the HTML editor in report removes custom html. <\/p>\n\n\n\n<p>Add the below code to create your custom location selector. Get your option values for your locations from <code>\/mod\/facetoface\/room\/manage.php<\/code> <\/p>\n\n\n<div class=\"gb-container gb-container-872aab02\">\n\n<div class=\"wp-block-kevinbatdorf-code-block-pro\" data-code-block-pro-font-family=\"\" style=\"font-size:1rem;line-height:1.5rem\"><span style=\"display:flex;align-items:center;padding:10px 0px 10px 16px;margin-bottom:-2px;width:100%;text-align:left;background-color:#2e2e2e;color:#d5ffff\">HTML<\/span><span role=\"button\" tabindex=\"0\" data-code=\"&lt;select id=&quot;location-selector&quot;&gt;\n    &lt;option value=&quot;all&quot;&gt;Select Location&lt;\/option&gt;\n    &lt;option value=&quot;392&quot;&gt;Virtual Session&lt;\/option&gt;\n    &lt;option value=&quot;393&quot;&gt;Melbourne&lt;\/option&gt;\n    &lt;option value=&quot;394&quot;&gt;Sydney&lt;\/option&gt;\n    &lt;option value=&quot;395&quot;&gt;Adelaide&lt;\/option&gt;\n    &lt;option value=&quot;396&quot;&gt;Perth&lt;\/option&gt;\n    &lt;option value=&quot;397&quot;&gt;Box Hill&lt;\/option&gt;\n    &lt;option value=&quot;398&quot;&gt;External Location&lt;\/option&gt;\n&lt;\/select&gt;\" style=\"color:#EEFFFF;display:none\" aria-label=\"Copy\" class=\"code-block-pro-copy-button\"><svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" style=\"width:24px;height:24px\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\"><path class=\"with-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M4.5 12.75l6 6 9-13.5\"><\/path><path class=\"without-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M16.5 8.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v8.25A2.25 2.25 0 006 16.5h2.25m8.25-8.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-7.5A2.25 2.25 0 018.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 00-2.25 2.25v6\"><\/path><\/svg><\/span><pre class=\"shiki material-theme-darker\" style=\"background-color: #212121\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;<\/span><span style=\"color: #F07178\">select<\/span><span style=\"color: #89DDFF\"> <\/span><span style=\"color: #C792EA\">id<\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">location-selector<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #89DDFF\">&gt;<\/span><\/span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    <\/span><span style=\"color: #89DDFF\">&lt;<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\"> <\/span><span style=\"color: #C792EA\">value<\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">all<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #89DDFF\">&gt;<\/span><span style=\"color: #EEFFFF\">Select Location<\/span><span style=\"color: #89DDFF\">&lt;\/<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\">&gt;<\/span><\/span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    <\/span><span style=\"color: #89DDFF\">&lt;<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\"> <\/span><span style=\"color: #C792EA\">value<\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">392<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #89DDFF\">&gt;<\/span><span style=\"color: #EEFFFF\">Virtual Session<\/span><span style=\"color: #89DDFF\">&lt;\/<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\">&gt;<\/span><\/span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    <\/span><span style=\"color: #89DDFF\">&lt;<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\"> <\/span><span style=\"color: #C792EA\">value<\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">393<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #89DDFF\">&gt;<\/span><span style=\"color: #EEFFFF\">Melbourne<\/span><span style=\"color: #89DDFF\">&lt;\/<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\">&gt;<\/span><\/span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    <\/span><span style=\"color: #89DDFF\">&lt;<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\"> <\/span><span style=\"color: #C792EA\">value<\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">394<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #89DDFF\">&gt;<\/span><span style=\"color: #EEFFFF\">Sydney<\/span><span style=\"color: #89DDFF\">&lt;\/<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\">&gt;<\/span><\/span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    <\/span><span style=\"color: #89DDFF\">&lt;<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\"> <\/span><span style=\"color: #C792EA\">value<\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">395<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #89DDFF\">&gt;<\/span><span style=\"color: #EEFFFF\">Adelaide<\/span><span style=\"color: #89DDFF\">&lt;\/<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\">&gt;<\/span><\/span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    <\/span><span style=\"color: #89DDFF\">&lt;<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\"> <\/span><span style=\"color: #C792EA\">value<\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">396<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #89DDFF\">&gt;<\/span><span style=\"color: #EEFFFF\">Perth<\/span><span style=\"color: #89DDFF\">&lt;\/<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\">&gt;<\/span><\/span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    <\/span><span style=\"color: #89DDFF\">&lt;<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\"> <\/span><span style=\"color: #C792EA\">value<\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">397<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #89DDFF\">&gt;<\/span><span style=\"color: #EEFFFF\">Box Hill<\/span><span style=\"color: #89DDFF\">&lt;\/<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\">&gt;<\/span><\/span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    <\/span><span style=\"color: #89DDFF\">&lt;<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\"> <\/span><span style=\"color: #C792EA\">value<\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">398<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #89DDFF\">&gt;<\/span><span style=\"color: #EEFFFF\">External Location<\/span><span style=\"color: #89DDFF\">&lt;\/<\/span><span style=\"color: #F07178\">option<\/span><span style=\"color: #89DDFF\">&gt;<\/span><\/span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;\/<\/span><span style=\"color: #F07178\">select<\/span><span style=\"color: #89DDFF\">&gt;<\/span><\/span><\/code><\/pre><\/div>\n\n<\/div>\n\n\n<p>4. On the report page we generate sign-up buttons using the room ID. <\/p>\n\n\n\n<p>The roomid filters and only shows events for that location. <\/p>\n\n\n\n<p>Each event has an &#8216;Number of Attendees (linked to attendee page)&#8217; column (1). This column has a link to <code>facetoface\/attendees\/view.php?id=xxxx<\/code> screen. <\/p>\n\n\n\n<p>We use our code to create a button (2) that redirect instead to the signup screen using that same event id. Notice the <code>?s=2088<\/code> in the code below.<\/p>\n\n\n\n<figure class=\"wp-block-image alignfull size-full\"><img loading=\"lazy\" decoding=\"async\" width=\"1768\" height=\"549\" src=\"https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/sign-up-button-in-report.jpg\" alt=\"Room ID from the URL filters the report and only shows events fro that room. Our code modifies the No of Attendees link to create a sign-up button.\" class=\"wp-image-373\" srcset=\"https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/sign-up-button-in-report.jpg 1768w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/sign-up-button-in-report-600x186.jpg 600w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/sign-up-button-in-report-900x279.jpg 900w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/sign-up-button-in-report-300x93.jpg 300w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/sign-up-button-in-report-768x238.jpg 768w, https:\/\/dev-train-well.pantheonsite.io\/wp-content\/uploads\/sign-up-button-in-report-1536x477.jpg 1536w\" sizes=\"(max-width: 1768px) 100vw, 1768px\" \/><figcaption class=\"wp-element-caption\">Room ID from the URL filters the report and only shows events for that room. Our code modifies the No of Attendees link to create a sign-up button.<\/figcaption><\/figure>\n\n\n\n<p><\/p>\n\n\n\n<h2 class=\"wp-block-heading\">Add the code<\/h2>\n\n\n\n<p>You can add the code below sitewide across LMS via&nbsp;<code>\/admin\/settings.php?section=additionalhtml<\/code>&nbsp;to activate this filter on all seminar events or&nbsp;load it for an individual course via HTML block. Refer to my post on <a href=\"https:\/\/www.linkedin.com\/pulse\/adding-code-enhance-totara-lms-vijay-rudraraju\/\" target=\"_blank\" rel=\"noreferrer noopener nofollow\">How to add code to enhance Totara LMS on LinkedIn<\/a> More comments have been added to the code. Add this code to the Before Body is Closed section of Additional HTML screen.<\/p>\n\n\n\n<div class=\"wp-block-kevinbatdorf-code-block-pro alignwide cbp-has-line-numbers\" data-code-block-pro-font-family=\"\" style=\"font-size:1rem;--cbp-line-number-color:#EEFFFF;--cbp-line-number-width:19.78125px;line-height:1.5rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)\"><span style=\"display:flex;align-items:center;padding:10px 0px 10px 16px;margin-bottom:-2px;width:100%;text-align:left;background-color:#2e2e2e;color:#d5ffff\">HTML<\/span><span role=\"button\" tabindex=\"0\" data-code=\"&lt;script&gt;\n    $(document).ready(function () {\n\n       \/*\n        Step 1: Create a signup via locations (Room ID) using a simple drop down on a dashboard page. When a location is selected, user is redirected to Seminar Room Assignments Reports with Sign-up buttons (see step 2 below)\n        *\/\n       \n        if ($('body').attr('id') == &quot;page-totara-dashboard-41&quot;) { \/\/ only target the sign-up by location dashboard using Body ID\n\n            var locationSelector = document.getElementById(&quot;location-selector&quot;); \/\/ get the dropdown\n\n            var locationLink = '\/totara\/reportbuilder\/report.php?id=321&amp;sid=1021&amp;roomid='; \/\/ link to the report where users will sign-up. It is a saved search that does not show cancelled events and only shows upcoming events for next 1 year.\n\n            var allupcoming = &quot;\/totara\/reportbuilder\/report.php?id=321&amp;sid=1021&quot;; \/\/ remove the locations (roomid) filter to show all all upcoming training.\n\n            $('#location-selector').on(&quot;change&quot;, function () { \/\/ when the dropdown is changed\n                if (locationSelector.value === &quot;&quot;) { \/\/ do nothing if location drop down is empty\n\n                } else if (locationSelector.value == &quot;all&quot;) { \/\/ when all is chosen, redirect to the allupcoming link\n\n                    window.location.href = allupcoming;\n\n                } else { \/\/ when any other location is chosen, redirect to the report but with roomid value extracted from the drop down and added to the end of the URL.\n\n                    window.location.href = locationLink + locationSelector.value;\n                }\n            })\n        }\n\n        \/* \n        Step 2: Add sign-up buttons to a Seminar Room Assignments report to allow users to sign-up by location. Users have been brought here from the  dropdown they chose in step 1 above. Doing so creates a unique URL with the attribute &amp;roomid=xxx appended to the report URL. This filters the report to just show only the events for that room ID (i.e. location).\n        *\/\n        if ($('body').attr('id') == &quot;page-totara-reportbuilder-report&quot;) { \/\/target the specific report only using ID for body\n\n            $('#report_workshop_room_assignments td.session_numattendeeslink a').each(function () { \/\/ in the report look for all links in 'Number of Attendees (linked to attendee page)' column\n\n                var link = $(this).attr('href'); \/\/ get the link URL which looks like \/mod\/facetoface\/attendees\/view.php?s=xxxx\n\n                var newlink = link.replace('attendees\/view.php?s=', 'signup.php?s='); \/\/ modify the URL to a sign-up link that looks like \/mod\/facetoface\/signup.php?s=xxxx\n\n                $(this).append('&lt;span class=&quot;sign-up-link&quot; style=&quot;margin-left: 1em;&quot;&gt;&lt;a class=&quot;link-as-button&quot; href=&quot;' + newlink + '&quot;&gt;Sign-up&lt;\/a&gt;&lt;\/span&gt;'); \/\/ Modify the new link to look like a button and display it next to the Number of attendees link.\n            });\n        }    \n  \n    });\n\n&lt;\/script&gt;\" style=\"color:#EEFFFF;display:none\" aria-label=\"Copy\" class=\"code-block-pro-copy-button\"><svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" style=\"width:24px;height:24px\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\"><path class=\"with-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M4.5 12.75l6 6 9-13.5\"><\/path><path class=\"without-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M16.5 8.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v8.25A2.25 2.25 0 006 16.5h2.25m8.25-8.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-7.5A2.25 2.25 0 018.25 18v-1.5m8.25-8.25h-6a2.25 2.25 0 00-2.25 2.25v6\"><\/path><\/svg><\/span><pre class=\"shiki material-theme-darker\" style=\"background-color: #212121\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;<\/span><span style=\"color: #F07178\">script<\/span><span style=\"color: #89DDFF\">&gt;<\/span><\/span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    <\/span><span style=\"color: #82AAFF\">$<\/span><span style=\"color: #EEFFFF\">(document)<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #82AAFF\">ready<\/span><span style=\"color: #EEFFFF\">(<\/span><span style=\"color: #C792EA\">function<\/span><span style=\"color: #EEFFFF\"> <\/span><span style=\"color: #89DDFF\">()<\/span><span style=\"color: #EEFFFF\"> <\/span><span style=\"color: #89DDFF\">{<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">       <\/span><span style=\"color: #545454; font-style: italic\">\/*<\/span><\/span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">        Step 1: Create a signup via locations (Room ID) using a simple drop down on a dashboard page. When a location is selected, user is redirected to Seminar Room Assignments Reports with Sign-up buttons (see step 2 below)<\/span><\/span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">        *\/<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">       <\/span><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">        <\/span><span style=\"color: #89DDFF; font-style: italic\">if<\/span><span style=\"color: #F07178\"> (<\/span><span style=\"color: #82AAFF\">$<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #C3E88D\">body<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #F07178\">)<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #82AAFF\">attr<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #C3E88D\">id<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #F07178\">) <\/span><span style=\"color: #89DDFF\">==<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">page-totara-dashboard-41<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #F07178\">) <\/span><span style=\"color: #89DDFF\">{<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/ only target the sign-up by location dashboard using Body ID<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">            <\/span><span style=\"color: #C792EA\">var<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #EEFFFF\">locationSelector<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #EEFFFF\">document<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #82AAFF\">getElementById<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">location-selector<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #F07178\">)<\/span><span style=\"color: #89DDFF\">;<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/ get the dropdown<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">            <\/span><span style=\"color: #C792EA\">var<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #EEFFFF\">locationLink<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #C3E88D\">\/totara\/reportbuilder\/report.php?id=321&amp;sid=1021&amp;roomid=<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #89DDFF\">;<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/ link to the report where users will sign-up. It is a saved search that does not show cancelled events and only shows upcoming events for next 1 year.<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">            <\/span><span style=\"color: #C792EA\">var<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #EEFFFF\">allupcoming<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">\/totara\/reportbuilder\/report.php?id=321&amp;sid=1021<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #89DDFF\">;<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/ remove the locations (roomid) filter to show all all upcoming training.<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">            <\/span><span style=\"color: #82AAFF\">$<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #C3E88D\">#location-selector<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #F07178\">)<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #82AAFF\">on<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">change<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #89DDFF\">,<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #C792EA\">function<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">()<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">{<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/ when the dropdown is changed<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">                <\/span><span style=\"color: #89DDFF; font-style: italic\">if<\/span><span style=\"color: #F07178\"> (<\/span><span style=\"color: #EEFFFF\">locationSelector<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #EEFFFF\">value<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">===<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">&quot;&quot;<\/span><span style=\"color: #F07178\">) <\/span><span style=\"color: #89DDFF\">{<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/ do nothing if location drop down is empty<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">                <\/span><span style=\"color: #89DDFF\">}<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF; font-style: italic\">else<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF; font-style: italic\">if<\/span><span style=\"color: #F07178\"> (<\/span><span style=\"color: #EEFFFF\">locationSelector<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #EEFFFF\">value<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">==<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">all<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #F07178\">) <\/span><span style=\"color: #89DDFF\">{<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/ when all is chosen, redirect to the allupcoming link<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">                    <\/span><span style=\"color: #EEFFFF\">window<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #EEFFFF\">location<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #EEFFFF\">href<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #EEFFFF\">allupcoming<\/span><span style=\"color: #89DDFF\">;<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">                <\/span><span style=\"color: #89DDFF\">}<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF; font-style: italic\">else<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">{<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/ when any other location is chosen, redirect to the report but with roomid value extracted from the drop down and added to the end of the URL.<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">                    <\/span><span style=\"color: #EEFFFF\">window<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #EEFFFF\">location<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #EEFFFF\">href<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #EEFFFF\">locationLink<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">+<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #EEFFFF\">locationSelector<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #EEFFFF\">value<\/span><span style=\"color: #89DDFF\">;<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">                <\/span><span style=\"color: #89DDFF\">}<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">            <\/span><span style=\"color: #89DDFF\">}<\/span><span style=\"color: #F07178\">)<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">        <\/span><span style=\"color: #89DDFF\">}<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">        <\/span><span style=\"color: #545454; font-style: italic\">\/* <\/span><\/span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">        Step 2: Add sign-up buttons to a Seminar Room Assignments report to allow users to sign-up by location. Users have been brought here from the  dropdown they chose in step 1 above. Doing so creates a unique URL with the attribute &amp;roomid=xxx appended to the report URL. This filters the report to just show only the events for that room ID (i.e. location).<\/span><\/span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">        *\/<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">        <\/span><span style=\"color: #89DDFF; font-style: italic\">if<\/span><span style=\"color: #F07178\"> (<\/span><span style=\"color: #82AAFF\">$<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #C3E88D\">body<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #F07178\">)<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #82AAFF\">attr<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #C3E88D\">id<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #F07178\">) <\/span><span style=\"color: #89DDFF\">==<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #C3E88D\">page-totara-reportbuilder-report<\/span><span style=\"color: #89DDFF\">&quot;<\/span><span style=\"color: #F07178\">) <\/span><span style=\"color: #89DDFF\">{<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/target the specific report only using ID for body<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">            <\/span><span style=\"color: #82AAFF\">$<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #C3E88D\">#report_workshop_room_assignments td.session_numattendeeslink a<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #F07178\">)<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #82AAFF\">each<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #C792EA\">function<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">()<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">{<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/ in the report look for all links in &#39;Number of Attendees (linked to attendee page)&#39; column<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">                <\/span><span style=\"color: #C792EA\">var<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #EEFFFF\">link<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #82AAFF\">$<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">this<\/span><span style=\"color: #F07178\">)<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #82AAFF\">attr<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #C3E88D\">href<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #F07178\">)<\/span><span style=\"color: #89DDFF\">;<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/ get the link URL which looks like \/mod\/facetoface\/attendees\/view.php?s=xxxx<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">                <\/span><span style=\"color: #C792EA\">var<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #EEFFFF\">newlink<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">=<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #EEFFFF\">link<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #82AAFF\">replace<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #C3E88D\">attendees\/view.php?s=<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #89DDFF\">,<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #C3E88D\">signup.php?s=<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #F07178\">)<\/span><span style=\"color: #89DDFF\">;<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/ modify the URL to a sign-up link that looks like \/mod\/facetoface\/signup.php?s=xxxx<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">                <\/span><span style=\"color: #82AAFF\">$<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">this<\/span><span style=\"color: #F07178\">)<\/span><span style=\"color: #89DDFF\">.<\/span><span style=\"color: #82AAFF\">append<\/span><span style=\"color: #F07178\">(<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #C3E88D\">&lt;span class=&quot;sign-up-link&quot; style=&quot;margin-left: 1em;&quot;&gt;&lt;a class=&quot;link-as-button&quot; href=&quot;<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">+<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #EEFFFF\">newlink<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">+<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #C3E88D\">&quot;&gt;Sign-up&lt;\/a&gt;&lt;\/span&gt;<\/span><span style=\"color: #89DDFF\">&#39;<\/span><span style=\"color: #F07178\">)<\/span><span style=\"color: #89DDFF\">;<\/span><span style=\"color: #F07178\"> <\/span><span style=\"color: #545454; font-style: italic\">\/\/ Modify the new link to look like a button and display it next to the Number of attendees link.<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">            <\/span><span style=\"color: #89DDFF\">}<\/span><span style=\"color: #F07178\">)<\/span><span style=\"color: #89DDFF\">;<\/span><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">        <\/span><span style=\"color: #89DDFF\">}<\/span><span style=\"color: #F07178\">    <\/span><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">  <\/span><\/span>\n<span class=\"line\"><span style=\"color: #F07178\">    <\/span><span style=\"color: #89DDFF\">}<\/span><span style=\"color: #EEFFFF\">)<\/span><span style=\"color: #89DDFF\">;<\/span><\/span>\n<span class=\"line\"><\/span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;\/<\/span><span style=\"color: #F07178\">script<\/span><span style=\"color: #89DDFF\">&gt;<\/span><\/span><\/code><\/pre><\/div>\n\n\n\n<p>That&#8217;s it!<\/p>\n\n\n\n<p>I hope you found this useful!<\/p>\n\n\n\n<p>Please <a href=\"https:\/\/www.linkedin.com\/pulse\/enable-signup-via-locations-using-simple-drop-down-totara-rudraraju\" target=\"_blank\" rel=\"noreferrer noopener nofollow\">comment and share your own thoughts<\/a> on this technique&#8230;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Totara Learn allows users the choice to choose training:<\/p>\n<p>Via the training catalogue by searching for course\/program<br \/>\nVia the training calendar by date (i.e. looking for training in next few weeks)<\/p>\n<p>Use simple code to create a a third option for users to find learning; i.e. choose their location to see if there are any upcoming seminar events to attend at their site\/location (i.e. Room). <\/p>\n","protected":false},"author":1,"featured_media":389,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[1],"tags":[9],"_links":{"self":[{"href":"https:\/\/dev-train-well.pantheonsite.io\/wp-json\/wp\/v2\/posts\/366"}],"collection":[{"href":"https:\/\/dev-train-well.pantheonsite.io\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/dev-train-well.pantheonsite.io\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/dev-train-well.pantheonsite.io\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/dev-train-well.pantheonsite.io\/wp-json\/wp\/v2\/comments?post=366"}],"version-history":[{"count":15,"href":"https:\/\/dev-train-well.pantheonsite.io\/wp-json\/wp\/v2\/posts\/366\/revisions"}],"predecessor-version":[{"id":390,"href":"https:\/\/dev-train-well.pantheonsite.io\/wp-json\/wp\/v2\/posts\/366\/revisions\/390"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/dev-train-well.pantheonsite.io\/wp-json\/wp\/v2\/media\/389"}],"wp:attachment":[{"href":"https:\/\/dev-train-well.pantheonsite.io\/wp-json\/wp\/v2\/media?parent=366"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/dev-train-well.pantheonsite.io\/wp-json\/wp\/v2\/categories?post=366"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/dev-train-well.pantheonsite.io\/wp-json\/wp\/v2\/tags?post=366"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}